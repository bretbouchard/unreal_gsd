---
phase: 04-vehicle-core-systems
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDWheelConfig.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Private/DataAssets/GSDWheelConfig.cpp
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDVehicleConfig.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Private/DataAssets/GSDVehicleConfig.cpp
autonomous: true

must_haves:
  truths:
    - "Developer can create a GSDWheelConfig Data Asset in the editor"
    - "Developer can create a GSDVehicleConfig Data Asset in the editor"
    - "Vehicle config references skeletal mesh, physics asset, and wheel configs"
  artifacts:
    - path: "Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDWheelConfig.h"
      provides: "Wheel configuration data asset"
      contains: "UCLASS.*GSDWheelConfig"
      min_lines: 40
    - path: "Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDVehicleConfig.h"
      provides: "Main vehicle configuration data asset"
      contains: "UCLASS.*GSDVehicleConfig"
      min_lines: 60
  key_links:
    - from: "GSDVehicleConfig"
      to: "UGSDDataAsset"
      via: "inheritance"
      pattern: "class.*: public UGSDDataAsset"
    - from: "GSDVehicleConfig"
      to: "GSDWheelConfig"
      via: "WheelConfigs array"
      pattern: "TArray.*GSDWheelConfig"
---

<objective>
Create the vehicle Data Asset hierarchy for configuring vehicles with body, wheels, suspension, and tire settings.

Purpose: Enable designers to configure vehicles entirely through Data Assets without code changes, following the established UGSDDataAsset pattern.
Output: GSDWheelConfig and GSDVehicleConfig data assets ready for vehicle spawning.
</objective>

<execution_context>
@/Users/bretbouchard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bretbouchard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-vehicle-core-systems/04-RESEARCH.md

# Reference patterns
@Plugins/GSD_Core/Source/GSD_Core/Public/DataAssets/GSDDataAsset.h
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create GSDWheelConfig Data Asset</name>
  <files>
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDWheelConfig.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Private/DataAssets/GSDWheelConfig.cpp
  </files>
  <action>
Create GSDWheelConfig Data Asset for individual wheel configuration.

Based on research (04-RESEARCH.md Pattern 2), implement:

1. Create DataAssets directory structure if needed:
   mkdir -p Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets
   mkdir -p Plugins/GSD_Vehicles/Source/GSD_Vehicles/Private/DataAssets

2. Create GSDWheelConfig.h with properties:
   - Inherit from UGSDDataAsset
   - UCLASS(BlueprintType, Category = "GSD|Vehicles")

   Properties (all EditDefaultsOnly, BlueprintReadOnly):
   Wheel Settings:
   - WheelBoneName: FName - bone name in skeletal mesh
   - WheelRadius: float = 35.0f (in cm)
   - WheelWidth: float = 20.0f (in cm)

   Steering/Brake/Drive:
   - bAffectedBySteering: bool = false
   - bAffectedByHandbrake: bool = false
   - bAffectedByEngine: bool = true
   - MaxSteerAngle: float = 70.0f (degrees)

   Suspension:
   - SuspensionMaxRaise: float = 10.0f
   - SuspensionMaxDrop: float = 10.0f
   - SuspensionDampingRatio: float = 0.5f

   Tire:
   - FrictionForceMultiplier: float = 3.0f

3. Create GSDWheelConfig.cpp:
   - Include GSDVehicleLog.h
   - Implement ValidateConfig() override to check WheelBoneName is not NAME_None
   - Log validation errors using LOG_GSDVEHICLES

CRITICAL: All properties must be EditDefaultsOnly (set in Data Asset editor, not per-instance).
</action>
  <verify>
grep "class.*GSDWheelConfig.*UGSDDataAsset" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDWheelConfig.h
grep "WheelBoneName" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDWheelConfig.h
grep "ValidateConfig" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Private/DataAssets/GSDWheelConfig.cpp
</verify>
  <done>
GSDWheelConfig Data Asset with wheel, suspension, and tire properties, inherits from UGSDDataAsset.
</done>
</task>

<task type="auto">
  <name>Task 2: Create GSDVehicleConfig Data Asset</name>
  <files>
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDVehicleConfig.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Private/DataAssets/GSDVehicleConfig.cpp
  </files>
  <action>
Create GSDVehicleConfig Data Asset as the main vehicle configuration container.

Based on research (04-RESEARCH.md Pattern 1), implement:

1. Create GSDVehicleConfig.h with properties:
   - Inherit from UGSDDataAsset
   - UCLASS(BlueprintType, Category = "GSD|Vehicles")

   Properties (all EditDefaultsOnly, BlueprintReadOnly):

   Mesh and Animation:
   - VehicleMesh: TSoftObjectPtr&lt;USkeletalMesh&gt; - vehicle skeletal mesh
   - PhysicsAsset: TSoftObjectPtr&lt;UPhysicsAsset&gt; - physics asset
   - AnimBlueprintClass: TSubclassOf&lt;UAnimInstance&gt; - animation blueprint

   Wheel Configuration:
   - WheelConfigs: TArray&lt;TSoftObjectPtr&lt;UGSDWheelConfig&gt;&gt; - wheel configs (front left, front right, rear left, rear right, etc.)

   Engine:
   - TorqueCurve: UCurveFloat* - engine torque vs RPM

   Physics:
   - Mass: float = 1500.0f (kg)
   - CenterOfMassOffset: FVector = FVector::ZeroVector
   - DragCoefficient: float = 0.3f

   Streaming:
   - bIsFastVehicle: bool = false - for streaming source configuration

2. Create GSDVehicleConfig.cpp:
   - Include GSDVehicleLog.h
   - Implement ValidateConfig() override:
     - Check VehicleMesh is valid
     - Check WheelConfigs has at least 2 entries
     - Check TorqueCurve is valid
     - Log all validation errors
   - Implement GetDisplayName() override to return DisplayName or "Unnamed Vehicle"

IMPORTANT: Use TSoftObjectPtr for asset references to support async loading later.
</action>
  <verify>
grep "class.*GSDVehicleConfig.*UGSDDataAsset" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDVehicleConfig.h
grep "WheelConfigs" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDVehicleConfig.h
grep "TorqueCurve" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDVehicleConfig.h
grep "ValidateConfig" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Private/DataAssets/GSDVehicleConfig.cpp
</verify>
  <done>
GSDVehicleConfig Data Asset with mesh, wheel, engine, and physics properties, inherits from UGSDDataAsset.
</done>
</task>

</tasks>

<verification>
1. Both Data Assets inherit from UGSDDataAsset
2. All properties are EditDefaultsOnly (not runtime-editable)
3. ValidateConfig implementations check required fields
4. Soft object pointers used for async loading support
</verification>

<success_criteria>
- GSDWheelConfig created with wheel/suspension/tire settings
- GSDVehicleConfig created with mesh, wheels, engine, physics settings
- Both inherit from UGSDDataAsset for consistency
- ValidateConfig methods implemented for error checking
</success_criteria>

<output>
After completion, create `.planning/phases/04-vehicle-core-systems/04-02-SUMMARY.md`
</output>
