---
phase: 05-vehicle-advanced-features
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDLaunchControlConfig.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Private/DataAssets/GSDLaunchControlConfig.cpp
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDTuningPreset.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Private/DataAssets/GSDTuningPreset.cpp
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDAttachmentConfig.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Private/DataAssets/GSDAttachmentConfig.cpp
autonomous: true

must_haves:
  truths:
    - "Designers can create launch control configs with throttle ramp and traction control settings"
    - "Designers can create tuning presets for compliance mode and chaos mode"
    - "Designers can define attachment points with socket names and mesh references"
  artifacts:
    - path: "Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDLaunchControlConfig.h"
      provides: "Launch control configuration Data Asset"
      contains: "class.*GSDLaunchControlConfig"
    - path: "Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDTuningPreset.h"
      provides: "Tuning preset Data Asset"
      contains: "class.*GSDTuningPreset"
    - path: "Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDAttachmentConfig.h"
      provides: "Attachment configuration Data Asset"
      contains: "class.*GSDAttachmentConfig"
  key_links:
    - from: "GSDLaunchControlConfig"
      to: "UGSDDataAsset"
      via: "inheritance"
      pattern: "UGSDDataAsset"
    - from: "GSDTuningPreset"
      to: "UGSDDataAsset"
      via: "inheritance"
      pattern: "UGSDDataAsset"
    - from: "GSDAttachmentConfig"
      to: "UGSDDataAsset"
      via: "inheritance"
      pattern: "UGSDDataAsset"
---

<objective>
Create Data Asset classes for launch control, tuning presets, and attachments that extend the GSDDataAsset base pattern.

Purpose: Enable designers to configure vehicle advanced features through Data Assets without code changes.
Output: Three new Data Asset types (GSDLaunchControlConfig, GSDTuningPreset, GSDAttachmentConfig) following established patterns from Phase 4.
</objective>

<execution_context>
@/Users/bretbouchard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bretbouchard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-vehicle-advanced-features/05-RESEARCH.md

# Reference: Phase 4 Data Asset pattern
@Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDVehicleConfig.h
@Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDWheelConfig.h
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Launch Control Config Data Asset</name>
  <files>
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDLaunchControlConfig.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Private/DataAssets/GSDLaunchControlConfig.cpp
  </files>
  <action>
Create UGSDLaunchControlConfig extending UGSDDataAsset with the following properties:

**Throttle Ramp:**
- `ThrottleRampTime` (float, default 1.5f, meta = (ClampMin = "0.1", UIMin = "0.1", UIMax = "10.0")) - Time to ramp throttle from 0 to 1
- `InitialThrottleLimit` (float, default 0.7f, meta = (ClampMin = "0", ClampMax = "1", UIMin = "0", UIMax = "1")) - Maximum initial throttle

**Traction Control:**
- `bEnableTractionControl` (bool, default true)
- `WheelSlipThreshold` (float, default 0.2f, meta = (ClampMin = "0", ClampMax = "1", UIMin = "0", UIMax = "1")) - Slip threshold before reducing torque
- `TorqueReductionFactor` (float, default 0.3f, meta = (ClampMin = "0", ClampMax = "1", UIMin = "0", UIMax = "1")) - Amount to reduce torque when slip detected

**RPM Control:**
- `TargetLaunchRPM` (float, default 4000.0f, meta = (ClampMin = "500.0", UIMin = "1000.0", UIMax = "15000.0")) - Target launch RPM for clutch-style launch
- `bHoldRPMAtLaunch` (bool, default false) - Whether to hold RPM at target before launch

Override ValidateConfig() to validate reasonable ranges:
- ThrottleRampTime > 0 (avoid division by zero)
- TargetLaunchRPM > 0
- WheelSlipThreshold in [0, 1]
- TorqueReductionFactor in [0, 1]

Override GetDisplayName():
```cpp
virtual FString GetDisplayName() const override { return TEXT("Launch Control Config"); }
```

Follow the exact pattern from GSDWheelConfig (include GSDVehicleConfig.h as reference for property categories).

DO NOT add any methods beyond constructor, ValidateConfig(), and GetDisplayName() - these are pure data containers.
  </action>
  <verify>
    grep -q "class.*GSDLaunchControlConfig" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDLaunchControlConfig.h
    grep -q "ThrottleRampTime" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDLaunchControlConfig.h
    grep -q "WheelSlipThreshold" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDLaunchControlConfig.h
  </verify>
  <done>UGSDLaunchControlConfig exists with throttle ramp, traction control, and RPM properties, extends UGSDDataAsset</done>
</task>

<task type="auto">
  <name>Task 2: Create Tuning Preset Data Asset</name>
  <files>
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDTuningPreset.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Private/DataAssets/GSDTuningPreset.cpp
  </files>
  <action>
Create UGSDTuningPreset extending UGSDDataAsset with the following properties organized by category:

**Steering:**
- `SteeringRatio` (float, default 1.0f, meta = (ClampMin = "0.1", UIMin = "0.1", UIMax = "5.0")) - Steering sensitivity multiplier
- `MaxSteeringAngle` (float, default 70.0f, meta = (ClampMin = "0", ClampMax = "90", UIMin = "0", UIMax = "90")) - Maximum steering angle in degrees

**Suspension:**
- `SuspensionStiffness` (float, default 1.0f, meta = (ClampMin = "0.1", UIMin = "0.1", UIMax = "10.0")) - Suspension stiffness multiplier
- `SuspensionDamping` (float, default 1.0f, meta = (ClampMin = "0.1", UIMin = "0.1", UIMax = "10.0")) - Suspension damping multiplier

**Tire:**
- `FrictionMultiplier` (float, default 1.0f, meta = (ClampMin = "0.1", UIMin = "0.1", UIMax = "5.0")) - Tire friction multiplier
- `LateralStiffness` (float, default 1.0f, meta = (ClampMin = "0.1", UIMin = "0.1", UIMax = "5.0")) - Lateral stiffness multiplier

**Engine:**
- `TorqueMultiplier` (float, default 1.0f, meta = (ClampMin = "0.1", UIMin = "0.1", UIMax = "5.0")) - Engine torque multiplier
- `MaxRPM` (float, default 7000.0f, meta = (ClampMin = "1000.0", UIMin = "1000.0", UIMax = "15000.0")) - Maximum engine RPM

**Physics:**
- `MassMultiplier` (float, default 1.0f, meta = (ClampMin = "0.1", UIMin = "0.1", UIMax = "5.0")) - Mass multiplier (1.0 = normal, >1 = heavier)
- `DragCoefficient` (float, default 0.3f, meta = (ClampMin = "0", UIMin = "0", UIMax = "1.0")) - Aerodynamic drag coefficient

**Interpolation:**
- `InterpolationDuration` (float, default 0.5f, meta = (ClampMin = "0", UIMin = "0", UIMax = "5.0")) - Duration to interpolate to this preset (0 = instant)

Override ValidateConfig() to validate reasonable ranges:
- SteeringRatio > 0 (avoid division by zero)
- MaxRPM > 0
- FrictionMultiplier > 0
- MassMultiplier > 0

Override GetDisplayName():
```cpp
virtual FString GetDisplayName() const override { return TEXT("Tuning Preset"); }
```

Add two static helper functions:
- `GetDefaultCompliancePreset()` - Returns placeholder for future default compliance preset (return nullptr for now)
- `GetDefaultChaosPreset()` - Returns placeholder for future default chaos preset (return nullptr for now)

These will be implemented later when default presets are created in editor.

DO NOT add InterpolateToPreset - that belongs on the vehicle pawn, not the config.
  </action>
  <verify>
    grep -q "class.*GSDTuningPreset" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDTuningPreset.h
    grep -q "SteeringRatio" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDTuningPreset.h
    grep -q "GetDefaultCompliancePreset" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDTuningPreset.h
  </verify>
  <done>UGSDTuningPreset exists with steering, suspension, tire, engine, and physics multipliers, extends UGSDDataAsset</done>
</task>

<task type="auto">
  <name>Task 3: Create Attachment Config Data Asset</name>
  <files>
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDAttachmentConfig.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Private/DataAssets/GSDAttachmentConfig.cpp
  </files>
  <action>
Create UGSDAttachmentConfig extending UGSDDataAsset with the following:

**Enum (before class, in GSDAttachmentConfig.h):**
```cpp
/**
 * Types of vehicle attachments for categorization and gameplay logic.
 * Place before UGSDAttachmentConfig class definition in the same header.
 */
UENUM(BlueprintType)
enum class EGSDAttachmentType : uint8
{
    FrontBumper    UMETA(DisplayName = "Front Bumper"),
    RearBumper     UMETA(DisplayName = "Rear Bumper"),
    Plow           UMETA(DisplayName = "Plow"),
    RoofRack       UMETA(DisplayName = "Roof Rack"),
    SideStep       UMETA(DisplayName = "Side Step"),
    Custom         UMETA(DisplayName = "Custom")
};
```

**Socket Information:**
- `SocketName` (FName) - Socket name on skeletal mesh for attachment point
- `AttachmentType` (EGSDAttachmentType) - Type of attachment
- `DisplayName` (FString) - Display name for UI

**Mesh:**
- `AttachmentMesh` (TSoftObjectPtr<UStaticMesh>) - Static mesh to attach (soft reference for async loading)

**Physics:**
- `bHasCollision` (bool, default true) - Whether attachment has collision
- `AdditionalMass` (float, default 0.0f, meta = (ClampMin = "0.0")) - Additional mass in kg

**Gameplay:**
- `bAffectsPhysics` (bool, default false) - Whether attachment affects vehicle physics behavior
- `DragModifier` (float, default 0.0f, meta = (ClampMin = "-1.0", UIMin = "-1.0", UIMax = "1.0")) - Drag coefficient modifier

Override ValidateConfig() with:
```cpp
bool UGSDAttachmentConfig::ValidateConfig(FString& OutError) const
{
    if (SocketName == NAME_None)
    {
        OutError = TEXT("SocketName must be set");
        return false;
    }

    if (DisplayName.IsEmpty())
    {
        OutError = TEXT("DisplayName must be set");
        return false;
    }

    // AttachmentMesh can be null for socket-only attachments
    // (some gameplay systems may spawn meshes dynamically)

    return true;
}
```

Override GetDisplayName():
```cpp
virtual FString GetDisplayName() const override { return DisplayName.IsEmpty() ? TEXT("Attachment Config") : DisplayName; }
```

DO NOT include any spawn/attach methods - those belong in a component.
  </action>
  <verify>
    grep -q "class.*GSDAttachmentConfig" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDAttachmentConfig.h
    grep -q "EGSDAttachmentType" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDAttachmentConfig.h
    grep -q "SocketName" Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDAttachmentConfig.h
  </verify>
  <done>UGSDAttachmentConfig exists with attachment type enum, socket info, mesh reference, and physics properties</done>
</task>

</tasks>

<verification>
- All three Data Assets compile without errors
- Each extends UGSDDataAsset following Phase 4 pattern
- Properties use EditDefaultsOnly and BlueprintReadOnly for designer editing
- ValidateConfig() implementations follow Phase 4 pattern with detailed error messages
- TSoftObjectPtr used for mesh references (async loading support)
</verification>

<success_criteria>
- UGSDLaunchControlConfig with throttle ramp, traction control, RPM settings
- UGSDTuningPreset with steering, suspension, tire, engine, physics multipliers
- UGSDAttachmentConfig with socket info, mesh reference, collision settings
- All three extend UGSDDataAsset and implement ValidateConfig()
- Plugin compiles successfully with new Data Assets
</success_criteria>

<output>
After completion, create `.planning/phases/05-vehicle-advanced-features/05-01-SUMMARY.md`
</output>
