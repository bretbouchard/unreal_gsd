---
phase: 11-council-fixes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/GSD_Crowds.h
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Fragments/GSDZombieStateFragment.h
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Fragments/GSDNavigationFragment.h
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Fragments/GSDSmartObjectFragment.h
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Processors/GSDCrowdLODProcessor.h
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Processors/GSDZombieBehaviorProcessor.h
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Processors/GSDNavigationProcessor.h
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Processors/GSDSmartObjectProcessor.h
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/AI/GSDHeroAIController.h
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Actors/GSDHeroNPC.h
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Actors/GSDCrowdTestbedActor.h
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Subsystems/GSDCrowdManagerSubsystem.h
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Subsystems/GSDSmartObjectSubsystem.h
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/DataAssets/GSDCrowdEntityConfig.h
  - Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Commandlets/GSDCrowdTestCommandlet.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/GSD_Vehicles.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Actors/GSDVehiclePawn.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Actors/GSDVehicleTestbedActor.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Components/GSDAttachmentComponent.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Components/GSDLaunchControlComponent.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Subsystems/GSDVehiclePoolSubsystem.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Subsystems/GSDVehicleSpawnerSubsystem.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDVehicleConfig.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDWheelConfig.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDTuningPreset.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDLaunchControlConfig.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDAttachmentConfig.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Commandlets/GSDVehicleTestCommandlet.h
  - Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Validation/GSDVehicleValidationLibrary.h
autonomous: true
must_haves:
  truths:
    - "All public UCLASS/USTRUCT declarations have GSD_*_API macros"
    - "Plugin compilation succeeds without linker warnings"
    - "Cross-plugin symbol resolution works correctly"
  artifacts:
    - path: "Plugins/GSD_Crowds/Source/GSD_Crowds/Public/GSD_Crowds.h"
      provides: "Module interface with GSD_CROWDS_API"
      contains: "GSD_CROWDS_API"
    - path: "Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/GSD_Vehicles.h"
      provides: "Module interface with GSD_VEHICLES_API"
      contains: "GSD_VEHICLES_API"
  key_links:
    - from: "Public headers"
      to: "Build.cs"
      via: "API macro definition"
      pattern: "GSD_.*_API.*UCLASS|USTRUCT"
---

<objective>
Add missing API export macros (GSD_CROWDS_API, GSD_VEHICLES_API, etc.) to all public UCLASS/USTRUCT declarations.

Purpose: Fix linker errors and enable proper cross-plugin symbol resolution. Without API macros, classes are not exported from their modules, causing linker failures when other plugins try to use them.

Output: All public classes and structs have correct API macros, enabling successful compilation and linking.

Council Issue: #1 - Missing GSD_*_API macros on public classes (Architecture Rick, P0 Critical)
</objective>

<execution_context>
@/Users/bretbouchard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bretbouchard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-council-fixes/11-RESEARCH.md

# Reference existing API macro pattern
@Plugins/GSD_Core/Source/GSD_Core/Public/GSD_Core.h
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add GSD_CROWDS_API to All Public Classes</name>
  <files>
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/GSD_Crowds.h
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Fragments/GSDZombieStateFragment.h
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Fragments/GSDNavigationFragment.h
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Fragments/GSDSmartObjectFragment.h
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Processors/GSDCrowdLODProcessor.h
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Processors/GSDZombieBehaviorProcessor.h
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Processors/GSDNavigationProcessor.h
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Processors/GSDSmartObjectProcessor.h
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/AI/GSDHeroAIController.h
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Actors/GSDHeroNPC.h
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Actors/GSDCrowdTestbedActor.h
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Subsystems/GSDCrowdManagerSubsystem.h
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Subsystems/GSDSmartObjectSubsystem.h
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/DataAssets/GSDCrowdEntityConfig.h
    Plugins/GSD_Crowds/Source/GSD_Crowds/Public/Commandlets/GSDCrowdTestCommandlet.h
  </files>
  <action>
Add GSD_CROWDS_API macro to all public UCLASS and USTRUCT declarations in GSD_Crowds plugin.

**Pattern to apply:**
```cpp
// BEFORE (incorrect - no export):
UCLASS()
class AGSDHeroNPC : public AActor

USTRUCT()
struct FGSDZombieStateFragment : public FMassFragment

// AFTER (correct - with export):
UCLASS()
class GSD_CROWDS_API AGSDHeroNPC : public AActor

USTRUCT()
struct GSD_CROWDS_API FGSDZombieStateFragment : public FMassFragment
```

**Files to update:**

1. **GSD_Crowds.h** - Module class:
   ```cpp
   class GSD_CROWDS_API FGSD_CrowdsModule : public IModuleInterface
   ```

2. **Fragments:**
   - GSDZombieStateFragment.h - Add to FGSDZombieStateFragment (USTRUCT)
   - GSDNavigationFragment.h - Add to FGSDNavigationFragment (USTRUCT)
   - GSDSmartObjectFragment.h - Add to FGSDSmartObjectFragment (USTRUCT)

3. **Processors:**
   - GSDCrowdLODProcessor.h - Add to UGSDCrowdLODProcessor (UCLASS)
   - GSDZombieBehaviorProcessor.h - Add to UGSDZombieBehaviorProcessor (UCLASS)
   - GSDNavigationProcessor.h - Add to UGSDNavigationProcessor (UCLASS)
   - GSDSmartObjectProcessor.h - Add to UGSDSmartObjectProcessor (UCLASS)

4. **AI:**
   - GSDHeroAIController.h - Add to AGSDHeroAIController (UCLASS)

5. **Actors:**
   - GSDHeroNPC.h - Add to AGSDHeroNPC (UCLASS)
   - GSDCrowdTestbedActor.h - Add to AGSDCrowdTestbedActor (UCLASS)

6. **Subsystems:**
   - GSDCrowdManagerSubsystem.h - Add to UGSDCrowdManagerSubsystem (UCLASS)
   - GSDSmartObjectSubsystem.h - Add to UGSDSmartObjectSubsystem (UCLASS)

7. **DataAssets:**
   - GSDCrowdEntityConfig.h - Add to UGSDCrowdEntityConfig (UCLASS)

8. **Commandlets:**
   - GSDCrowdTestCommandlet.h - Add to UGSDCrowdTestCommandlet (UCLASS)

**Important:**
- Macro goes AFTER UCLASS()/USTRUCT() and BEFORE class/struct keyword
- Only apply to PUBLIC classes (in Public/ directory)
- Do NOT apply to private implementation classes
- Verify macro is defined in GSD_Crowds.Build.cs (should already exist)
  </action>
  <verify>
    ```bash
    # Check all public headers have API macro on UCLASS
    for file in Plugins/GSD_Crowds/Source/GSD_Crowds/Public/**/*.h; do
      if grep -q "UCLASS()" "$file"; then
        if ! grep -q "GSD_CROWDS_API.*class" "$file"; then
          echo "ERROR: Missing GSD_CROWDS_API in $file"
        fi
      fi
    done

    # Check all public headers have API macro on USTRUCT
    for file in Plugins/GSD_Crowds/Source/GSD_Crowds/Public/**/*.h; do
      if grep -q "USTRUCT()" "$file"; then
        if ! grep -q "GSD_CROWDS_API.*struct" "$file"; then
          echo "ERROR: Missing GSD_CROWDS_API in $file"
        fi
      fi
    done

    echo "API macro verification complete"
    ```
  </verify>
  <done>
    - All 15 public GSD_Crowds headers updated with GSD_CROWDS_API
    - Module class has GSD_CROWDS_API
    - All UCLASS declarations have GSD_CROWDS_API
    - All USTRUCT declarations have GSD_CROWDS_API
  </done>
</task>

<task type="auto">
  <name>Task 2: Add GSD_VEHICLES_API to All Public Classes</name>
  <files>
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/GSD_Vehicles.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Actors/GSDVehiclePawn.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Actors/GSDVehicleTestbedActor.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Components/GSDAttachmentComponent.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Components/GSDLaunchControlComponent.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Subsystems/GSDVehiclePoolSubsystem.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Subsystems/GSDVehicleSpawnerSubsystem.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDVehicleConfig.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDWheelConfig.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDTuningPreset.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDLaunchControlConfig.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/DataAssets/GSDAttachmentConfig.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Commandlets/GSDVehicleTestCommandlet.h
    Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/Validation/GSDVehicleValidationLibrary.h
  </files>
  <action>
Add GSD_VEHICLES_API macro to all public UCLASS and USTRUCT declarations in GSD_Vehicles plugin.

**Apply same pattern as Task 1, but using GSD_VEHICLES_API:**

**Files to update:**

1. **GSD_Vehicles.h** - Module class:
   ```cpp
   class GSD_VEHICLES_API FGSD_VehiclesModule : public IModuleInterface
   ```

2. **Actors:**
   - GSDVehiclePawn.h - Add to AGSDVehiclePawn (UCLASS)
   - GSDVehicleTestbedActor.h - Add to AGSDVehicleTestbedActor (UCLASS)

3. **Components:**
   - GSDAttachmentComponent.h - Add to UGSDAttachmentComponent (UCLASS)
   - GSDLaunchControlComponent.h - Add to UGSDLaunchControlComponent (UCLASS)

4. **Subsystems:**
   - GSDVehiclePoolSubsystem.h - Add to UGSDVehiclePoolSubsystem (UCLASS)
   - GSDVehicleSpawnerSubsystem.h - Add to UGSDVehicleSpawnerSubsystem (UCLASS)

5. **DataAssets:**
   - GSDVehicleConfig.h - Add to UGSDVehicleConfig (UCLASS) and any USTRUCTs
   - GSDWheelConfig.h - Add to UGSDWheelConfig (UCLASS)
   - GSDTuningPreset.h - Add to UGSDTuningPreset (UCLASS)
   - GSDLaunchControlConfig.h - Add to UGSDLaunchControlConfig (UCLASS)
   - GSDAttachmentConfig.h - Add to UGSDAttachmentConfig (UCLASS)

6. **Commandlets:**
   - GSDVehicleTestCommandlet.h - Add to UGSDVehicleTestCommandlet (UCLASS)

7. **Validation:**
   - GSDVehicleValidationLibrary.h - Add to UGSDVehicleValidationLibrary (UCLASS)

**Important:**
- Macro goes AFTER UCLASS()/USTRUCT() and BEFORE class/struct keyword
- Only apply to PUBLIC classes (in Public/ directory)
- Verify macro is defined in GSD_Vehicles.Build.cs (should already exist)
  </action>
  <verify>
    ```bash
    # Check all public headers have API macro on UCLASS
    for file in Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/**/*.h; do
      if grep -q "UCLASS()" "$file"; then
        if ! grep -q "GSD_VEHICLES_API.*class" "$file"; then
          echo "ERROR: Missing GSD_VEHICLES_API in $file"
        fi
      fi
    done

    # Check all public headers have API macro on USTRUCT
    for file in Plugins/GSD_Vehicles/Source/GSD_Vehicles/Public/**/*.h; do
      if grep -q "USTRUCT()" "$file"; then
        if ! grep -q "GSD_VEHICLES_API.*struct" "$file"; then
          echo "ERROR: Missing GSD_VEHICLES_API in $file"
        fi
      fi
    done

    echo "API macro verification complete"
    ```
  </verify>
  <done>
    - All 14 public GSD_Vehicles headers updated with GSD_VEHICLES_API
    - Module class has GSD_VEHICLES_API
    - All UCLASS declarations have GSD_VEHICLES_API
    - All USTRUCT declarations have GSD_VEHICLES_API
  </done>
</task>

</tasks>

<verification>
1. All public classes in GSD_Crowds have GSD_CROWDS_API macro
2. All public classes in GSD_Vehicles have GSD_VEHICLES_API macro
3. Plugin compilation succeeds without linker warnings
4. No "unresolved external symbol" errors
</verification>

<success_criteria>
- All 29 public headers updated with correct API macros
- Compilation succeeds without errors or warnings
- Cross-plugin symbol resolution works correctly
- Hot reload succeeds in editor
</success_criteria>

<output>
After completion, create `.planning/phases/11-council-fixes/11-01-SUMMARY.md`
</output>
