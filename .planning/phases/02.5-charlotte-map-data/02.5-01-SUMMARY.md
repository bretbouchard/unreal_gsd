---
phase: 02.5
plan: 01
subsystem: charlotte-map-data
tags: [python, gis, coordinates, pyproj, utm]
completed: 2026-02-25
duration: 2 min
---

# Phase 02.5 Plan 01: Package Foundation and Coordinate Transformation Summary

## One-Liner

Python package foundation with WGS84 -> UTM Zone 17N -> Unreal centimeters coordinate transformation pipeline for Charlotte I-485 corridor.

## Objective

Create the Python package foundation for Charlotte map data acquisition, including project structure, configuration files, and the core coordinate transformation module.

## Dependency Graph

```mermaid
graph LR
    A[Phase 1-2: Plugin Foundation] --> B[Phase 02.5-01: Package Foundation]
    B --> C[Phase 02.5-02+: Data Pipeline Scripts]
```

**Requires:** None (foundation package)

**Provides:**
- Python package structure under `tools/charlotte_map_acquisition/`
- Configuration management for Charlotte bounds and zoom levels
- Coordinate transformation utilities (WGS84 -> UTM17N -> Unreal)

**Affects:** All subsequent Phase 02.5 plans depend on this package

## Tech Stack

### Added
| Library | Version | Purpose |
|---------|---------|---------|
| pyproj | >=3.6.0 | Coordinate transformations (WGS84 <-> UTM) |
| gdal | >=3.9.0 | GIS data processing |
| osmnx | >=1.9.0 | OpenStreetMap data extraction |
| geopandas | >=0.14.0 | Geospatial dataframes |
| shapely | >=2.0.0 | Geometry operations |
| rasterio | >=1.3.0 | Raster/DEM data handling |
| requests | >=2.31.0 | HTTP for tile downloads |
| Pillow | >=10.0.0 | Image processing |
| numpy | >=1.26.0 | Numerical operations |

### Patterns
- **Coordinate Pipeline**: WGS84 (lat/lon) -> UTM Zone 17N (meters) -> Unreal (centimeters)
- **Origin Offset**: I-485 center becomes Unreal (0, 0, 0)
- **Axis Mapping**: X=North, Y=East, Z=Up (Unreal convention)

## Key Files

### Created
| File | Purpose |
|------|---------|
| `tools/charlotte_map_acquisition/__init__.py` | Package initialization |
| `tools/charlotte_map_acquisition/config/__init__.py` | Config module with JSON loaders |
| `tools/charlotte_map_acquisition/config/charlotte_bounds.json` | I-485 bounding box coordinates |
| `tools/charlotte_map_acquisition/config/zoom_levels.json` | Tile zoom configurations |
| `tools/charlotte_map_acquisition/coordinates.py` | Core coordinate transformation module |
| `tools/charlotte_map_acquisition/requirements.txt` | GIS dependencies |
| `tools/charlotte_map_acquisition/README.md` | Package documentation |

### Modified
None (new package)

## Decisions Made

1. **UTM Zone 17N**: Charlotte at 80.8W falls within UTM Zone 17N (84W-78W), providing minimal distortion for the metro area.

2. **Origin at I-485 Center**: The center of the I-485 corridor (35.227N, -80.843W) becomes Unreal origin (0, 0, 0), keeping all city coordinates relatively close to origin.

3. **Centimeter Units**: Unreal uses centimeters internally, so all meter values are multiplied by 100 for direct use in engine.

4. **Unreal Axis Convention**: X=North, Y=East, Z=Up aligns with common UE5 mapping conventions for geographic data.

5. **Lazy Transformer Loading**: pyproj Transformer is created once and cached to avoid repeated CRS initialization overhead.

## Tasks Completed

| Task | Name | Commit | Files |
|------|------|--------|-------|
| 1 | Create Package Structure and Configuration | 373d937 | 6 files |
| 2 | Create Coordinate Transformation Module | f2e0e2f | coordinates.py |

## Verification

- [x] Python package structure exists with `__init__.py` files
- [x] `charlotte_bounds.json` contains I-485 bounds (N:35.37, S:35.08, E:-80.65, W:-81.00)
- [x] `zoom_levels.json` defines tile sizes for zoom 15-18
- [x] `requirements.txt` lists all GIS dependencies with versions
- [x] `coordinates.py` provides `latlon_to_unreal()` transformation
- [x] Coordinate flow: WGS84 -> UTM17N -> Unreal cm documented

## Deviations from Plan

None - plan executed exactly as written.

## Next Phase Readiness

**Ready for:** Phase 02.5 Plan 02 (Tile Download Script)

**Blockers:** None

**Recommendations:**
- Install Python dependencies before running pipeline scripts: `pip install -r tools/charlotte_map_acquisition/requirements.txt`
- Test coordinate transformations with known Charlotte landmarks
